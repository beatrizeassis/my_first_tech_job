<% if current_user.candidate %>
  <div class="container">
    <h2><strong>My Matches</strong></h2>
    <div class="card-matches-container">
      <% @matches.each do |match| %>
        <div class="card-match">
          <div class="card-match-info">
            <%= image_tag "company_logo", class: "company-logo" %>
            <div class="job-details">
              <p>
                <%= match.job.title %> at <%= match.job.company.name %>
                <br>Status:<br>
                <div class="progress">
                  <% if match.status == "Submitted" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width:20%">
                      Submitted
                    </div>
                  <% elsif match.status == "Review" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width:30%">
                      Review
                    </div>
                  <% elsif match.status == "First_interview" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width:50%">
                      First Interview
                    </div>
                  <% elsif match.status == "First_interview" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:60%">
                      Second Interview
                    </div>
                  <% elsif match.status == "Second_interview" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                      Second Interview
                    </div>
                  <% elsif match.status == "Job_offer" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width:80%">
                      Job Offer!
                    </div>
                  <% elsif match.status == "Onboarded" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                      Onboarded!
                    </div>
                  <% elsif match.status == "Rejected" %>
                    <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                    aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                      Rejected
                    </div>
                  <% end %>
              </div></p>
            </div>
          </div>
          <div class="card-match-actions">
            <%= link_to "View Job", job_path(match.job), data: {turbo_method: :get} %>
            <%= link_to "Withdraw from this application", match_path(match), data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to withdrawal from this application?"} %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% else %>
  Error. Page not found.
<% end %>
